name: sender
on:
    workflow_dispatch:
        inputs:
            message:
                description: The message
                default: "Hewwo uwu"
                required: false
                type: string 
jobs:
    ping:
        runs-on: ubuntu-latest
        permissions:
            actions: write
        steps:
        - name: Trigger target workflow
          run: |
            curl -X POST \
            -H "Accept: application/vnd.github.v3+json" \
            -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
            https://api.github.com/repos/indrora/repo-ipc-receiver/dispatches \
            -d '{"event_type": "ping", "client_payload": {"message": "${{inputs.message}}!"}}'
          env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # Use the automatically generated GITHUB_TOKEN
        - name: Trigger workflow X
          id: trigger-workflow
          uses: octokit/request-action
          with:
            route: /repos/{owner}/{repo}/dispatches
            owner: indrora
            repo: repo-ipc-receiver
            event_type: ping
            message: ${{inputs.message}}
        env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}